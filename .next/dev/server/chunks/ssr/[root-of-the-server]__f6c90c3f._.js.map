{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///Users/macbookair/sabi-shopper/src/app/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\n\nexport default function DemandePage() {\n  const [name, setName] = useState(\"\");\n  const [phone, setPhone] = useState(\"\");\n  const [city, setCity] = useState(\"\");\n  const [details, setDetails] = useState(\"\");\n  const [files, setFiles] = useState<FileList | null>(null);\n\n  const [error, setError] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n\n  async function envoyer() {\n    setError(\"\");\n\n    if (!name.trim() || !phone.trim() || !city.trim()) {\n      setError(\"‚ö†Ô∏è Remplis Nom, T√©l√©phone et Ville.\");\n      return;\n    }\n    if (!files || files.length === 0) {\n      setError(\"‚ö†Ô∏è Ajoute au moins 1 image.\");\n      return;\n    }\n\n    try {\n      setLoading(true);\n\n      const fd = new FormData();\n      Array.from(files).forEach((f) => fd.append(\"images\", f));\n\n      // 1) Upload images\n      const res = await fetch(\"/api/upload\", { method: \"POST\", body: fd });\n      const data = await res.json().catch(() => ({}));\n\n      if (!res.ok) {\n        throw new Error(data?.error || `Erreur upload (HTTP ${res.status})`);\n      }\n\n      const base = process.env.NEXT_PUBLIC_BASE_URL || window.location.origin;\n\n      // 2) URLs\n      const galleryUrl = `${base}${data.galleryPath}`; // ex: /u/xxxx\n      const devisUrl = `${base}/devis/${data.id}`; // page devis (si tu l'as cr√©√©e)\n\n      // 3) Message WhatsApp\n      // IMPORTANT: liens SEULS sur leurs lignes => plus de chances d'√™tre cliquables\n      const message = `\nBonjour Sabi üëã\nNouvelle demande Sabi Personal Shopper Chine.\n\nNom : ${name}\nT√©l√©phone : ${phone}\nVille : ${city}\n\nD√©tails :\n${details || \"-\"}\n\n${galleryUrl}\n${devisUrl}\n      `.trim();\n\n      // 4) Ouvrir WhatsApp\n      window.open(\n        `https://wa.me/2250788655341?text=${encodeURIComponent(message)}`,\n        \"_blank\",\n        \"noopener,noreferrer\"\n      );\n    } catch (e: any) {\n      setError(`‚ùå Upload impossible : ${e?.message || \"Erreur inconnue\"}`);\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  return (\n    <div style={{ maxWidth: 760, margin: \"0 auto\", padding: 16 }}>\n      <h1 style={{ fontSize: 28, fontWeight: 900, margin: 0 }}>üì∏ Demande de devis</h1>\n      <p style={{ marginTop: 8, color: \"#555\", lineHeight: 1.6 }}>\n        Ajoute les images, puis on envoie √† Sabi un <b>lien unique</b> (galerie) + un lien devis.\n        <br />\n        <span style={{ fontSize: 12, color: \"#777\" }}>\n          Note : WhatsApp n‚Äôattache pas automatiquement les images, on envoie des liens.\n        </span>\n      </p>\n\n      {error && (\n        <div style={{ marginTop: 12, background: \"#fff3cd\", padding: 12, borderRadius: 10 }}>\n          {error}\n        </div>\n      )}\n\n      <div style={{ display: \"grid\", gap: 12, marginTop: 16 }}>\n        <input\n          placeholder=\"Nom & Pr√©noms\"\n          value={name}\n          onChange={(e) => setName(e.target.value)}\n          style={{ padding: 12, borderRadius: 12, border: \"1px solid rgba(0,0,0,.15)\" }}\n        />\n        <input\n          placeholder=\"T√©l√©phone / WhatsApp\"\n          value={phone}\n          onChange={(e) => setPhone(e.target.value)}\n          style={{ padding: 12, borderRadius: 12, border: \"1px solid rgba(0,0,0,.15)\" }}\n        />\n        <input\n          placeholder=\"Ville de livraison\"\n          value={city}\n          onChange={(e) => setCity(e.target.value)}\n          style={{ padding: 12, borderRadius: 12, border: \"1px solid rgba(0,0,0,.15)\" }}\n        />\n        <textarea\n          placeholder=\"D√©tails (couleur, taille, mod√®le‚Ä¶)\"\n          rows={4}\n          value={details}\n          onChange={(e) => setDetails(e.target.value)}\n          style={{ padding: 12, borderRadius: 12, border: \"1px solid rgba(0,0,0,.15)\" }}\n        />\n\n        <input\n          type=\"file\"\n          multiple\n          accept=\"image/*\"\n          onChange={(e) => setFiles(e.target.files)}\n          style={{ padding: 10 }}\n        />\n\n        <button\n          onClick={envoyer}\n          disabled={loading}\n          style={{\n            padding: \"14px\",\n            borderRadius: 999,\n            background: loading ? \"#999\" : \"#16a34a\",\n            color: \"white\",\n            fontWeight: 900,\n            border: \"none\",\n            cursor: loading ? \"not-allowed\" : \"pointer\",\n          }}\n        >\n          {loading ? \"Upload en cours...\" : \"Uploader & envoyer WhatsApp\"}\n        </button>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 260, "column": 0}, "map": {"version":3,"sources":["file:///Users/macbookair/sabi-shopper/node_modules/next/src/server/route-modules/app-page/module.compiled.js"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK"],"mappings":"AAAA,IAAIA,QAAQC,GAAG,CAACC,YAAY,KAAK,QAAQ;;KAElC;IACL,IAAIF,QAAQC,GAAG,CAACK,yBAAyB,EAAE;;SAcpC;QACL,IAAIN,QAAQC,GAAG,CAACM,QAAQ,KAAK,WAAe;YAC1C,IAAIP,QAAQC,GAAG,CAACO,SAAS,eAAE;gBACzBL,OAAOC,OAAO,GAAGC,QAAQ;YAC3B,OAAO;;QAGT,OAAO;;IAOT;AACF","ignoreList":[0]}},
    {"offset": {"line": 279, "column": 0}, "map": {"version":3,"sources":["file:///Users/macbookair/sabi-shopper/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxDevRuntime\n"],"names":["module","exports","require","vendored","ReactJsxDevRuntime"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,4HACRC,QAAQ,CAAC,YAAY,CAAEC,kBAAkB","ignoreList":[0]}},
    {"offset": {"line": 284, "column": 0}, "map": {"version":3,"sources":["file:///Users/macbookair/sabi-shopper/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n"],"names":["module","exports","require","vendored","React"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,4HACRC,QAAQ,CAAC,YAAY,CAAEC,KAAK","ignoreList":[0]}}]
}